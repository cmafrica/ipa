<html>
	<head>
		<meta charset=utf-8></meta>
		<title>An Interactive IPA Chart</title>
		<link href="/psi.ico" rel="shortcut icon" type="image/x-icon">
		<script src="/jquery.js"></script>
		<style>
		* {
			list-style-type: none;
			margin: 0;
			padding: 0;
			border-collapse: collapse;
			border-spacing: 0;
			border: 0;
			font-style: normal;
			font-weight: normal;
			list-style: none;
			text-align: left;
			font-size: 100%;
			font-weight: normal;
			text-decoration: none;
			color: black;
			font-family: Calibri, sans-serif;
			-webkit-appearance: none;
		}
		body  {
			width: 100%; 
			height: 100%;
		}
		.play  {
			display: none;
		}
		table {
			margin: 0 20 0 0; 
		}
		table, th, td, textarea	 {
			border: 1px solid black; 
			border-collapse: collapse;
		}
		select option:selected {
			font-size: 200%; 
		}
		.side, .side div, .side div a {
			text-align: right; 
			
		}
		.half {
			float: left; 
		}
		.sub {
			float: right; 
		}
		td {
			text-align: center; 
			height: 25px;
			width: 25px;
		}	
		nav {
			width: 10%; 
			margin: auto; 
		}	
		textarea {
			margin: auto;
			width: 100%; 
			clear: both;
			font-size: 30; 
		}
		li {
			display: inline; 
		}
		#footer  {
			clear: both; 
			width: 100%;
			text-align: center;
		}
		.link {
			color: blue;
			text-decoration: underline; 
		}
		</style>
	</head>
	<body>
	<button>Submit</button>
	<script>
	function chomp(input, offset){return input.substring(0, input.length-offset)}
	function capital(string){return string.charAt(0).toUpperCase() + string.slice(1);}
	
	function center() {
		var z = ($(document).width()-($(".half").eq(0).width()+$(".half").eq(1).width()))/2
		$("section").css({"margin-left": z, "margin-right": z})
	}
	function footer() {
		var y = $(document).height()+($("#footer").height()-$(document).height())
		$("#footer").css("padding-top", y)
	}
	function ipa() {
		$("#consonants tr:eq(0) th, #vowels tr:eq(0) th").each(function() {
			$(this).css({"-webkit-transform": "rotate(270deg) translate(-25px,40px)", "white-space":"nowrap"})
			$(this).children("div").css({"height":"100", "width":"25"})
		})
		center()
		footer()
		$("th").each(function() {		
			var a = $(this).find("a").html()
			var div = $(this).find("div")
			$(this).html(div)
			div.html(a)
		})
		$("td").each(function() {
			var letter = $(this).find("a").html() || ""
			var number = $(this).attr("number") || ""
			$(this).html("<input name='letters[]' type='checkbox' name='letter[]' value='"+letter+", "+number+"'>"+letter+"</input>")
		})
		//$("input").css("-webkit-appearance", "checkbox")
		$("td").toggle(
			function(){$(this).find("input").attr("checked", false); $(this).css("color", "lightgray")},
			function(){$(this).find("input").attr("checked", true); $(this).css("color", "black")}
		)
		
		
		$(".rotate").toggle(
			function()  {
				var ri = $(this)[0].cellIndex
				$(this).find("div").css("color", "lightgray")
				$(this).parent().parent().parent().find("tr:not(:first)").each(function()  {
					$(this).children().eq(ri*2).css("color", "lightgray")
					$(this).children().eq(ri*2-1).css("color", "lightgray")
					$(this).children().eq(ri*2).find("input").attr("checked", false)
					$(this).children().eq(ri*2-1).find("input").attr("checked", false)
				})
			},
			function()  {
				var ri = $(this)[0].cellIndex
				$(this).find("div").css("color", "black")
				$(this).parent().parent().parent().find("tr:not(:first)").each(function()  {
					$(this).children().eq(ri*2).css("color", "black")
					$(this).children().eq(ri*2-1).css("color", "black")
					$(this).children().eq(ri*2).find("input").attr("checked", true)
					$(this).children().eq(ri*2-1).find("input").attr("checked", true)
				})
			}
		)			
		$(".side").toggle(
			function() {$(this).find("a").css("color", "lightgray"); $(this).parent().find("td a").each(function() {$(this).css("display", "none")})},
			function() {$(this).find("a").css("color", "black"); $(this).parent().find("td a").each(function() {$(this).css({"display":"block", "text-align":"center"})})}
		)
	}
	$(function() {
		$.post("ipa.php",{"mode":"2", "filename":"All"},
		function(data) {
			$("section").html(data)
			ipa()
			$(".sub").remove()
		})
		$("button").click(function() {
			var name = prompt("Language Name", "");
			if (name != null && name != "") {
				$.ajax({
					type: "POST",
					url: "ipa.php",
					data: $("form").serialize() + "&mode=3&filename="+name,
					dataType: "text",
					success: function(data) {alert("Thank you! "+capital(name)+" submitted."); window.location.href='index.html'}					
				})
				
				
			}			
		})
		
	})
	</script>	
	<form><section></section></form>
	<div id=footer>
		Make sure your browser is set to standard <a href='http://www.unc.edu/~jlsmith/ipa-fonts.html' target='_blank' class='link'>Unicode</a> fonts in order for the page to properly render.<br />
		Not configured for Internet Explorer. Designed in <a href='https://www.google.com/intl/en/chrome/browser/' target='_blank' class='link'>Google Chrome</a>.<br />
		Please contact me with any question, suggestions for features, errors encountered or language requests.<br />
		Â©2012 Matthew Morrone <a href="mailto:mam315@pitt.edu" class='link'>mam315@pitt.edu</a>
	</div>
	</body>
</html>

